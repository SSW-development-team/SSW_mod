scripted_gui = {	
	ssw_research_atomic_panel = {
		context_type = player_context
		parent_window_token = top_bar
		window_name = "ssw_research_atomic_panel"

		visible = {
			is_ai = no
		}

		effects = {
			button_open_atomic_gui_click = {
				if = {
					limit = { has_variable = ssw_atomic_gui }
					clear_variable = ssw_atomic_gui

				}
				else = {
					set_variable = { ssw_atomic_gui = 1 }
				}
			}
		}
	}
	ssw_research_atomic_window = {
		context_type = player_context
		parent_window_token = top_bar
		window_name = "ssw_research_atomic_window"

		visible = {
			has_variable = ssw_atomic_gui
		}

		effects = {
			button_open_atomic_gui_click = {
			}
			close_button_click = {
				# Invoke scripted effect to add a random point to the line
				# See scripted effect file
				SAMPLE_add_random_point_to_line = yes
			}
			reset_button_click = {
				# Invoke scripted effect to add a random point to the line
				# See scripted effect file
				set_variable = { uranium_value_every_month = 30 }
				set_variable = { uranium_value = 1 }
				set_variable = { plutonium_value_every_month = 30 }
				set_variable = { plutonium_value = 1 }
				set_variable = { uranium_max_value = 10 }
				set_variable = { plutonium_max_value = 10 }
				clamp_variable = { var = uranium_value min = 0 max = uranium_max_value } 
				clamp_variable = { var = plutonium_value min = 0 max = plutonium_max_value } 

				clear_array = SAMPLE_graph_offsets
				clear_array = SAMPLE_graph_slopes
				clear_array = SAMPLE_numbers
				set_variable = { SAMPLE_count  = 0 }

			}
			ssw_research_atomic_production_uranium_up_click = {
				if = {
					limit = {
						check_variable = { uranium_value < uranium_max_value }
					}
					add_to_variable = { uranium_value = 1 }
					add_to_variable = { uranium_value_every_month = 30 }

				}
				else = {
					add_to_variable = { uranium_value = 0 }

				}

			}
			ssw_research_atomic_production_uranium_down_click = {
				if = {
					limit = {
						check_variable = { uranium_value > 0 }
					}
					add_to_variable = { uranium_value = -1 }
					add_to_variable = { uranium_value_every_month = -30 }

				}
				else = {
					add_to_variable = { uranium_value = 0 }

				}
			}
			ssw_research_atomic_production_plutonium_up_click = {
				if = {
					limit = {
						check_variable = { plutonium_value < plutonium_max_value }
					}
					add_to_variable = { plutonium_value = 1 }
					add_to_variable = { plutonium_value_every_month = 30 }
				}
				else = {
				}

			}
			ssw_research_atomic_production_plutonium_down_click = {
				add_to_variable = { plutonium_value = -1 }
				add_to_variable = { plutonium_value_every_month = -30 }
			}

		}
		dynamic_lists = {
			line_segments = {
				array = SAMPLE_graph_offsets
				change_scope = no
				entry_container = line_graph_line_segment
				index = SAMPLE_numbers
			}
		}

		properties = {
			segment = {
				# Sets they position of the line segment to the graph offset
				# Equal to -y1
				y = SAMPLE_graph_offsets^segment_idx
				# Tells the shader how steep to draw the line
				# Must be equal to (y2 - y1) / 2 + 50
				frame = SAMPLE_graph_slopes^segment_idx
			}
		}
		triggers = {
		}
	}
}
